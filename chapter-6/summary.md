# 6章 変数

- CommonLisp は以下のに種類の変数をサポートしている
  - レキシカル変数(lexical variable)；大雑把に言うとローカル変数
  - ダイナミック変数(dynamic variable)；大雑把に言うとグローバル変数
    - スペシャル変数(special variable)とも呼ばれることもある
    - 処理系によって使う単語が違う

## 6.1 変数の基礎

- 変数；値を保持できる名前付きの場所
  - CommonLispは動的型付け(dynamically typed)
    - 型付けがされていないため型宣言の必要はない
    - 型情報は値が持っている
    - 型エラーは動的に検出される
- すべての値はオブジェクトへの参照
  - 概念的には(？)
  - 値の変更でオブジェクトを変更しない
    - 変数がどのオブジェクトを指すのかがが変わるだけ
    - ただし、変更可能(mutable)なオブジェクトの参照なら変更できる
- 束縛
  - 束縛(binding)；変数の実行時における発現
    - 変数と紐付いたオブジェクトのことを束縛って呼んでるっぽい
  - 関数が呼ばれるたびに引数を保持するため新しい束縛(binding)を作る
  - ある一つの変数はたくさんの束縛を持てる
    - 例えば再帰関数は呼び出しのたびに束縛し直される
- 関数のパラメータが保持するのは参照
  - 参照の値渡し；Java、Pythonと似ている
- `LET`;新しい変数を導入する特殊フォーム
```
(let (valiable*)
  (body-form*))
```
  - `LET`フォームは新しい変数束縛を作る
  - 初期値フォームの評価後、適切な束縛が作られ `body-form`が実行される 
  - `LET` 本体の最後の式が返り値となる
  - `LET`を抜ければ参照はもとに戻る
- `LET*`
  - `LET`では 本体内でしか変数を使用できない
  - `LET*` は初期値のフォームで前に出てきた変数を使用できる
```
(let* ((x 10)
      (y (+ x 10)))
  (list x y))

# 以下と同じ
(let ((x 10))
  (let ((y (+ x 10)))
    (list x y)))
``` 
- `DOTTIMES`;束縛フォームとして働く特別な構文要素
  - 7章で解説
```
(dottimes (x 10) (format t "~d " x)) -> 0 1 2 3 4 5 6 7 8 9 
```



